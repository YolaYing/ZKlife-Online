import { Bytes } from "../../common/type";
import {
  read_public_len_then_bytes,
  // @ts-ignore
  require,
} from "../../common/zkwasm";
import { readBlocks } from "./readblock";

import { handleFunc } from '../ethereum/register';

export function zkmain_lib(): void {
  
  let blocks = readBlocks();

  const expected_state = read_public_len_then_bytes();

  const state: Bytes = handleFunc(blocks) as Bytes;

  require(state == expected_state ? 1 : 0);
}

export function asmain_lib(): Uint8Array {
  
  let blocks = readBlocks();
  
  const state: Bytes = handleFunc(blocks) as Bytes;

  return state as Uint8Array;
}
